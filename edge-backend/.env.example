# ===============================================================================
# MyCodeAssistant Edge Backend - Environment Variables
# ===============================================================================
# Copy this file to .env for local development
# For production, use wrangler secrets instead
# ===============================================================================

# ===============================================================================
# Core AI/LLM Services
# ===============================================================================

# OpenAI API Key - Required for GPT models
# Get from: https://platform.openai.com/api-keys
# Format: sk-...
OPENAI_API_KEY=sk-your-openai-api-key-here
APPLE_APP_SPECIFIC_PASSWORD
# OpenRouter API Key - For multi-model routing
# Get from: https://openrouter.ai/keys
# Format: sk-or-v1-...
OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key-here

# ===============================================================================
# Cloudflare Services
# ===============================================================================

# Cloudflare Account ID
# Find in Cloudflare Dashboard > Right sidebar
CLOUDFLARE_ACCOUNT_ID=091c9e59ca0fc3bea9f9d432fa12a3b1

# Cloudflare API Token (Optional)
# Create at: https://dash.cloudflare.com/profile/api-tokens
# Permissions needed: Workers Scripts:Edit, D1:Edit, R2:Edit
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token-here

# ===============================================================================
# R2 Storage Configuration
# ===============================================================================

# R2 Access Keys - For object storage
# Create at: Cloudflare Dashboard > R2 > Manage R2 API Tokens
R2_ACCESS_KEY_ID=your-r2-access-key-id-here
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key-here

# R2 Endpoints
R2_ENDPOINT=https://091c9e59ca0fc3bea9f9d432fa12a3b1.r2.cloudflarestorage.com
R2_BUCKET_NAME=mca-assets

# ===============================================================================
# D1 Database Configuration
# ===============================================================================

# D1 Database ID (will be set after database creation)
# Run: wrangler d1 create mca-db
D1_DATABASE_ID=your-d1-database-id-here
D1_DATABASE_NAME=mca-db

# ===============================================================================
# KV Namespace Configuration
# ===============================================================================

# KV Namespace IDs (will be set after namespace creation)
# Run: wrangler kv:namespace create FLAGS
KV_FLAGS_ID=your-kv-namespace-id-here
KV_FLAGS_PREVIEW_ID=your-kv-preview-namespace-id-here

# ===============================================================================
# Vectorize Configuration
# ===============================================================================

# Vectorize Index Name
VECTORIZE_INDEX_NAME=mca-embeddings

# Embedding Model Configuration
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_DIMENSIONS=1536

# ===============================================================================
# LangFlow Integration
# ===============================================================================

# LangFlow Webhook Secret - For webhook signature validation
# Generate with: openssl rand -hex 32
LANGFLOW_WEBHOOK_SECRET=your-webhook-secret-here

# LangFlow API Configuration (if needed)
LANGFLOW_API_URL=https://your-langflow-instance.com/api
LANGFLOW_API_KEY=your-langflow-api-key-here

# ===============================================================================
# GitHub Integration
# ===============================================================================

# GitHub Personal Access Token
# Create at: https://github.com/settings/tokens
# Scopes needed: repo, read:user
GITHUB_TOKEN=ghp_your-github-token-here

# GitHub Repository Configuration
GITHUB_OWNER=your-github-username
GITHUB_REPO=your-repository-name

# ===============================================================================
# Development Configuration
# ===============================================================================

# Environment Mode
ENVIRONMENT=development

# Local Development Ports
DEV_PORT=8787
DEV_PROTOCOL=http

# Debug Settings
DEBUG=false
LOG_LEVEL=info

# ===============================================================================
# Security Configuration
# ===============================================================================

# CORS Settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8787
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Request-ID

# Rate Limiting (requests per minute)
RATE_LIMIT_DEFAULT=100
RATE_LIMIT_AUTHENTICATED=500

# JWT Configuration (if using JWT auth)
JWT_SECRET=your-jwt-secret-here
JWT_EXPIRY=86400

# ===============================================================================
# Monitoring and Analytics
# ===============================================================================

# Sentry DSN (Optional - for error tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Analytics Engine (Optional)
ANALYTICS_ENABLED=false

# ===============================================================================
# Feature Flags
# ===============================================================================

# Feature toggles
FEATURE_EMBEDDINGS_ENABLED=true
FEATURE_LANGFLOW_INTEGRATION=true
FEATURE_GITHUB_SYNC=false
FEATURE_RATE_LIMITING=true

# ===============================================================================
# Worker Configuration
# ===============================================================================

# Worker Names (for multi-worker setup)
API_WORKER_NAME=mca-edge-worker
EMBEDDINGS_WORKER_NAME=mca-embeddings-worker

# Worker Routes (if using custom domains)
# API_ROUTE=api.example.com/*
# EMBEDDINGS_ROUTE=embeddings.example.com/*

# ===============================================================================
# Database Migrations
# ===============================================================================

# Migrations Directory
MIGRATIONS_DIR=./migrations

# Auto-migrate on deploy
AUTO_MIGRATE=false

# ===============================================================================
# Notes
# ===============================================================================
# 1. Never commit the actual .env file to version control
# 2. Add .env to your .gitignore file
# 3. For production, use wrangler secrets instead of .env files
# 4. Run ./setup-secrets.sh to configure production secrets
# 5. Use dev.vars for Cloudflare Workers local development
# ===============================================================================